<style>
  h1 {
    color: purple;
  }
</style>

<h1>Discover a new Place</h1>
<Questions questions={questionsToShow}/>
<Results items={matchedItems} show={showResults} />

<script>
  import Questions from './components/Questions.html';
  import Results from './components/Results.html';

  export default {
    computed: {
      showResults: ({ $questions, $answers }) => Object.keys($answers).length == $questions.length,
      questionsToShow: ({ $questions, $answers }) => {
        return $questions.slice(0, Object.keys($answers).length + 1)
      },
      matchedItems: ({ $pois, $questions, $answers }) => {
        if (Object.keys($answers).length !== $questions.length) {
          return []
        }
        return $pois
          .filter(({ city }) => city.toLowerCase() === $answers.city.toLowerCase())
          .filter(({ vibe }) => vibe.toLowerCase() === $answers.vibe.toLowerCase())
          .filter(({ budget }) => budget.toLowerCase() === $answers.budget.toLowerCase())
          .filter((poi) => poi["hobbies/interests"].toLowerCase() === $answers["hobbies/interests"].toLowerCase())
      }
    },
    data() {
      return {
        answer: 'Los Angeles'
      };
    },
    components: { Questions, Results }
  };
</script>
